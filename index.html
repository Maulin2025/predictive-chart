<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predictive Food Replenishment Cycle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8FAFC;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .flow-line {
            position: relative;
            width: 2px;
            height: 40px;
            background-color: #118AB2;
            margin: 0 auto;
        }
        .flow-line-horiz {
            position: relative;
            height: 2px;
            width: 100%;
            background-color: #118AB2;
            margin: 0;
        }
        .flow-arrow-down::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: -5px;
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 10px solid #118AB2;
        }
        .flow-arrow-right::after {
            content: '';
            position: absolute;
            right: -1px;
            top: -5px;
            width: 0;
            height: 0;
            border-top: 6px solid transparent;
            border-bottom: 6px solid transparent;
            border-left: 10px solid #118AB2;
        }
    </style>
</head>
<body class="text-[#073B4C]">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-[#073B4C] mb-2">Predictive Food Replenishment Cycle</h1>
            <p class="text-lg text-[#118AB2]">A Dynamic Approach to Customer Loyalty and Retention</p>
        </header>

        <main>
            <section id="flowchart" class="mb-16">
                <h2 class="text-3xl font-bold text-center mb-8">The Customer Replenishment Journey</h2>
                <p class="max-w-3xl mx-auto text-center text-gray-600 mb-12">
                    This model visualizes how we intelligently predict a customer's next food purchase. The journey begins with the first order and splits into two distinct paths. A third, dynamic "Intent" phase can override the initial two, ensuring we always act on the earliest and most relevant signals.
                </p>

                <div class="flex flex-col items-center">
                    <div class="bg-white p-6 rounded-lg shadow-lg border-2 border-[#FFD166] w-full max-w-sm text-center">
                        <h3 class="text-xl font-bold">Entry</h3>
                        <p class="text-gray-700 mt-2">Customer Makes a Food Order</p>
                    </div>

                    <div class="flex justify-between w-full max-w-lg mt-4 mb-4">
                        <div class="flex flex-col items-center">
                            <div class="flow-line mb-2"></div>
                            <p class="text-sm font-semibold text-gray-500">No</p>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="flow-line mb-2"></div>
                            <p class="text-sm font-semibold text-gray-500">Yes</p>
                        </div>
                    </div>
                    
                    <div class="w-full flex flex-col lg:flex-row justify-center items-start gap-8">
                        
                        <div class="w-full lg:w-1/2 bg-white p-6 rounded-lg shadow-lg border-t-4 border-[#06D6A0]">
                            <h3 class="text-2xl font-bold text-center mb-4">Phase 2: Guideline</h3>
                            <div class="space-y-4">
                                <div>
                                    <h4 class="font-bold text-lg">Logic:</h4>
                                    <ul class="list-disc list-inside text-gray-600">
                                        <li>For first-time buyers (1 order)</li>
                                        <li>Uses fixed inputs like pet breed and pack size</li>
                                        <li>Calculates predicted date</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="w-full lg:w-1/2 bg-white p-6 rounded-lg shadow-lg border-t-4 border-[#FF6B6B]">
                            <h3 class="text-2xl font-bold text-center mb-4">Phase 1: Hybrid Baseline</h3>
                            <div class="space-y-4">
                                <div>
                                    <h4 class="font-bold text-lg">Logic:</h4>
                                    <ul class="list-disc list-inside text-gray-600">
                                        <li>For repeat buyers (&#8805;2 orders)</li>
                                        <li>Uses historical purchase data</li>
                                        <li>Prioritizes SKU cycle over category cycle</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="flow-line-horiz my-8 w-1/2"><span class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-[#F8FAFC] px-2 text-[#118AB2] text-sm font-bold">Dynamic Override</span></div>
                    
                    <div class="flex flex-col items-center w-full">
                        <div class="w-full max-w-lg bg-white p-6 rounded-lg shadow-lg border-t-4 border-[#118AB2]">
                            <h3 class="text-2xl font-bold text-center mb-4">Phase 3: Intent</h3>
                            <div class="space-y-4">
                                <div>
                                    <h4 class="font-bold text-lg">Logic:</h4>
                                    <ul class="list-disc list-inside text-gray-600">
                                        <li>Triggered by customer interest &#8805;15 days after purchase</li>
                                        <li>Can override Phase 1 & 2 predictions at any time</li>
                                        <li>Wins ties for final nudge selection</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="flow-line my-8"></div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-lg border-2 border-[#118AB2] w-full max-w-2xl text-center">
                        <h3 class="text-xl font-bold">Final Output Logic</h3>
                        <p class="text-gray-700 mt-2">The system selects the **earliest nudge** per customer and subcategory, with Phase 3 (Intent) taking priority in case of a tie.</p>
                    </div>

                    <div class="flow-line my-8"></div>

                    <div class="bg-white p-6 rounded-lg shadow-lg border-2 border-[#073B4C] w-full max-w-sm text-center">
                        <h3 class="text-xl font-bold">Business Outcomes</h3>
                        <p class="text-gray-700 mt-2">The cycle culminates in measurable improvements to the business.</p>
                    </div>
                </div>
            </section>

            <section id="data-viz" class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-center mb-4">Optimized Communication Channels</h3>
                    <p class="text-center text-gray-600 mb-6">The system prioritizes the customer's best-response channel while respecting cooldowns. This chart shows a hypothetical breakdown of channel effectiveness for driving repurchases.</p>
                    <div class="chart-container">
                        <canvas id="communicationChart"></canvas>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-center mb-4">Impact on Business Outcomes</h3>
                    <p class="text-center text-gray-600 mb-6">By implementing this predictive cycle, we aim to achieve significant results. This chart ranks the expected impact of our key business goals.</p>
                    <div class="chart-container">
                        <canvas id="outcomesChart"></canvas>
                    </div>
                </div>
            </section>
        </main>
        
        <footer class="text-center text-gray-500 text-sm mt-12 py-4 border-t">
            <p>Predictive Food Replenishment Infographic | Generated on August 21, 2025</p>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const wrapLabel = (label) => {
                const maxLength = 16;
                if (label.length <= maxLength) {
                    return label;
                }
                const words = label.split(' ');
                const lines = [];
                let currentLine = '';
                words.forEach(word => {
                    if ((currentLine + word).length > maxLength) {
                        lines.push(currentLine.trim());
                        currentLine = '';
                    }
                    currentLine += word + ' ';
                });
                lines.push(currentLine.trim());
                return lines;
            };
            
            const tooltipTitleCallback = (tooltipItems) => {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                    return label.join(' ');
                } else {
                    return label;
                }
            };

            const sharedChartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            font: {
                                size: 14,
                                family: 'Inter'
                            },
                            color: '#073B4C'
                        }
                    },
                    tooltip: {
                        callbacks: {
                            title: tooltipTitleCallback
                        },
                        bodyFont: {
                            size: 14,
                            family: 'Inter'
                        },
                        titleFont: {
                           size: 16,
                           family: 'Inter'
                        }
                    }
                }
            };

            const communicationCtx = document.getElementById('communicationChart').getContext('2d');
            new Chart(communicationCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Push Notifications', 'Email Campaigns', 'WhatsApp Messages'],
                    datasets: [{
                        label: 'Channel Effectiveness',
                        data: [55, 30, 15],
                        backgroundColor: ['#118AB2', '#06D6A0', '#FFD166'],
                        borderColor: '#FFFFFF',
                        borderWidth: 4,
                        hoverOffset: 8
                    }]
                },
                options: {
                    ...sharedChartOptions,
                    cutout: '60%',
                }
            });

            const outcomesCtx = document.getElementById('outcomesChart').getContext('2d');
            const rawLabels = [
                'Reduce Customer Lapses', 
                'Improve Repeat Purchase Rates', 
                'Strengthen Customer Loyalty', 
                'Upsell Larger Packs (from Phase 2 insights)'
            ];
            const wrappedLabels = rawLabels.map(wrapLabel);

            new Chart(outcomesCtx, {
                type: 'bar',
                data: {
                    labels: wrappedLabels,
                    datasets: [{
                        label: 'Strategic Impact Score',
                        data: [95, 90, 80, 70],
                        backgroundColor: ['#FF6B6B', '#FFD166', '#06D6A0', '#118AB2'],
                        borderRadius: 4,
                        barThickness: 30,
                    }]
                },
                options: {
                    ...sharedChartOptions,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            beginAtZero: true,
                            grid: {
                                display: false
                            },
                            ticks: { color: '#073B4C' }
                        },
                        y: {
                            grid: {
                                display: false
                            },
                            ticks: { color: '#073B4C' }
                        }
                    },
                    plugins: {
                        ...sharedChartOptions.plugins,
                        legend: {
                            display: false
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
